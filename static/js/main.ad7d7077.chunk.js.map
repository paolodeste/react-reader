{"version":3,"sources":["Components.js","index.js","modules/EpubView/style.js","modules/EpubView/EpubView.js","App.js","modules/ReactReader/style.js","modules/ReactReader/ReactReader.js","modules/index.js"],"names":["Container","styled","div","ReaderContainer","props","fullscreen","Bar","header","breakpoint","ButtonWrapper","LogoWrapper","a","Logo","img","Button","button","GenericButton","CloseIcon","i","FontSizeButton","render","document","getElementById","viewHolder","position","height","width","view","global","ePub","Epub","EpubView","onLocationChange","loc","location","locationChanged","newLocation","start","handleKeyPress","key","nextPage","prevPage","state","isLoaded","toc","viewerRef","React","createRef","book","rendition","this","initBook","addEventListener","first","url","tocChanged","epubInitOptions","destroy","loaded","navigation","then","setState","initReader","removeEventListener","nextProps","prevProps","display","epubOptions","getRendition","node","current","renderTo","contained","href","prev","next","on","styles","ref","style","loadingView","renderBook","Component","defaultProps","defaultStyles","storage","localStorage","GlobalStyle","createGlobalStyle","App","toggleFullscreen","setTimeout","createEvent","initUIEvent","onLocationChanged","setItem","onToggleFontSize","nextState","largeText","themes","fontSize","handleChangeFile","event","results","length","e","file","type","alert","localFile","target","result","localName","name","getItem","src","alt","as","onChange","onClick","title","container","overflow","readerArea","zIndex","backgroundColor","transition","containerExpaned","transform","titleArea","top","left","right","textAlign","color","reader","bottom","swipeWrapper","arrow","outline","border","background","marginTop","padding","fontFamily","cursor","userSelect","appearance","fontWeight","arrowHover","tocBackground","tocArea","overflowY","WebkitOverflowScrolling","tocAreaButton","borderBottom","boxSizing","tocButton","borderRadius","tocButtonExpaned","tocButtonBar","margin","tocButtonBarTop","tocButtonBottom","margintop","TocItem","setLocation","label","PureComponent","ReactReader","toggleToc","expanedToc","readerRef","onTocChange","map","item","Object","assign","showToc","swipeable","renderTocToggle","onSwipedRight","onSwipedLeft","trackMouse","renderToc"],"mappings":"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","file":"static/js/main.ad7d7077.chunk.js","sourcesContent":["import styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\n\nexport const Container = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n  min-height: 100vh;\n  background: linear-gradient(to bottom, #f2f2f2 0%, #333 100%);\n`;\nexport const ReaderContainer = styled.div`\n  font-size: 16px;\n  position: absolute;\n  top: ${props => (props.fullscreen ? 0 : 135)}px;\n  left: ${props => (props.fullscreen ? 0 : 1)}rem;\n  right: ${props => (props.fullscreen ? 0 : 1)}rem;\n  bottom: ${props => (props.fullscreen ? 0 : 1)}rem;\n  transition: all 0.6s ease;\n  ${props => !props.fullscreen && \"0 0 5px rgba(0,0,0,.3);\"};\n`;\nexport const Bar = styled.header`\n  position: absolute;\n  top: 10px;\n  left: 20px;\n  right: 20px;\n\n  ${breakpoint(\"tablet\")`\n    display: flex;\n    align-items: flex-end;\n  `};\n`;\nexport const ButtonWrapper = styled.div`\n  ${breakpoint(\"mobile\")`\n    display: flex;\n    justify-content: center;\n    align-items: baseline;\n    padding-top: 0.5rem;\n  `};\n`;\nexport const LogoWrapper = styled.a`\n  ${breakpoint(\"tablet\")`\n    margin-right: auto;\n  `};\n`;\nexport const Logo = styled.img`\n  width: 250px;\n  height: auto;\n  display: block;\n  margin: 0 auto 0px;\n  ${breakpoint(\"tablet\")`\n    width: 330px;\n    height: 104px;\n    display: inline-block;\n    margin-left: 2px;\n  `};\n`;\nconst Button = styled.button`\n  font-family: inherit;\n  font-size: inherit;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  user-select: none;\n  appearance: none;\n  background: none;\n`;\nexport const GenericButton = styled(Button)`\n  color: #808080;\n  font-size: 12px;\n  display: inline-block;\n  margin-left: 1rem;\n  ${breakpoint(\"tablet\")`\n    font-size: 16px;\n    \n  `};\n`;\nexport const CloseIcon = styled.i`\n  vertical-align: middle;\n  display: inline-block;\n  width: 2rem;\n  height: 2rem;\n  background: #666;\n  margin-left: 5px;\n  border-radius: 50%;\n  position: relative;\n  transform: rotate(45deg);\n  &:before,\n  &:after {\n    content: \"\";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 60%;\n    height: 2px;\n    background: #fff;\n    margin-left: -30%;\n    margin-top: -1px;\n    border-radius: 1px;\n  }\n  &:after {\n    transform: rotate(-90deg);\n  }\n`;\nexport const FontSizeButton = styled(Button)`\n  position: fixed;\n  bottom: 1.5rem;\n  right: 1.5rem;\n  z-index: 10;\n  background: #eee;\n  border-radius: 2px;\n  padding: 0.5rem;\n`;\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport App from \"./App\";\n\nrender(<App />, document.getElementById(\"root\"));\n","export default {\n  viewHolder: {\n    position: \"relative\",\n    height: \"100%\",\n    width: \"100%\"\n  },\n  view: {\n    height: \"100%\"\n  }\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Epub from \"epubjs/lib/index\";\nimport defaultStyles from \"./style\";\n\nglobal.ePub = Epub; // Fix for v3 branch of epub.js -> needs ePub to by a global var\n\nclass EpubView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoaded: false,\n      toc: []\n    };\n    this.viewerRef = React.createRef();\n    this.location = props.location;\n    this.book = this.rendition = this.prevPage = this.nextPage = null;\n  }\n\n  componentDidMount() {\n    this.initBook(true);\n    document.addEventListener(\"keyup\", this.handleKeyPress, false);\n  }\n\n  initBook(first) {\n    const { url, tocChanged, epubInitOptions } = this.props;\n    if (this.book) {\n      this.book.destroy();\n    }\n    this.book = new Epub(url, epubInitOptions);\n    this.book.loaded.navigation.then(({ toc }) => {\n      this.setState(\n        {\n          isLoaded: true,\n          toc: toc\n        },\n        () => {\n          tocChanged && tocChanged(toc);\n          this.initReader();\n        }\n      );\n    });\n  }\n\n  componentWillUnmount() {\n    this.book = this.rendition = this.prevPage = this.nextPage = null;\n    document.removeEventListener(\"keyup\", this.handleKeyPress, false);\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return (\n      !this.state.isLoaded ||\n      nextProps.location !== this.props.location ||\n      nextProps.location !== this.props.location\n    );\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.location !== this.props.location &&\n      this.location !== this.props.location\n    ) {\n      this.rendition.display(this.props.location);\n    }\n    if (prevProps.url !== this.props.url) {\n      this.initBook();\n    }\n  }\n\n  initReader() {\n    const { toc } = this.state;\n    const { location, epubOptions, getRendition } = this.props;\n    const node = this.viewerRef.current;\n    this.rendition = this.book.renderTo(node, {\n      contained: true,\n      width: \"100%\",\n      height: \"100%\",\n      ...epubOptions\n    });\n    this.rendition.display(\n      typeof location === \"string\" || typeof location === \"number\"\n        ? location\n        : toc[0].href\n    );\n\n    this.prevPage = () => {\n      this.rendition.prev();\n    };\n    this.nextPage = () => {\n      this.rendition.next();\n    };\n    this.rendition.on(\"locationChanged\", this.onLocationChange);\n    this.rendition.on(\"keyup\", this.handleKeyPress);\n    getRendition && getRendition(this.rendition);\n  }\n\n  onLocationChange = loc => {\n    const { location, locationChanged } = this.props;\n    const newLocation = loc && loc.start;\n    if (location !== newLocation) {\n      this.location = newLocation;\n      locationChanged && locationChanged(newLocation);\n    }\n  };\n\n  renderBook() {\n    const { styles } = this.props;\n    return <div ref={this.viewerRef} style={styles.view} />;\n  }\n\n  handleKeyPress = ({ key }) => {\n    key && key === \"ArrowRight\" && this.nextPage();\n    key && key === \"ArrowLeft\" && this.prevPage();\n  };\n\n  render() {\n    const { isLoaded } = this.state;\n    const { loadingView, styles } = this.props;\n    return (\n      <div style={styles.viewHolder}>\n        {(isLoaded && this.renderBook()) || loadingView}\n      </div>\n    );\n  }\n}\n\nEpubView.defaultProps = {\n  loadingView: null,\n  locationChanged: null,\n  tocChanged: null,\n  styles: defaultStyles,\n  epubOptions: {},\n  epubInitOptions: {}\n};\n\nEpubView.propTypes = {\n  url: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.instanceOf(ArrayBuffer)\n  ]),\n  loadingView: PropTypes.element,\n  location: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  locationChanged: PropTypes.func,\n  tocChanged: PropTypes.func,\n  styles: PropTypes.object,\n  epubInitOptions: PropTypes.object,\n  epubOptions: PropTypes.object,\n  getRendition: PropTypes.func\n};\n\nexport default EpubView;\n","import React, { Component } from \"react\";\nimport { createGlobalStyle } from \"styled-components\";\nimport FileReaderInput from \"react-file-reader-input\";\nimport { ReactReader } from \"./modules\";\nimport {\n  Container,\n  ReaderContainer,\n  Bar,\n  LogoWrapper,\n  Logo,\n  GenericButton,\n  CloseIcon,\n  FontSizeButton,\n  ButtonWrapper\n} from \"./Components\";\n\nconst storage = global.localStorage || null;\n\nconst DEMO_URL =\n  \"https://gerhardsletten.github.io/react-reader/files/alice.epub\";\nconst DEMO_NAME = \"Alice in wonderland\";\n\nconst GlobalStyle = createGlobalStyle`\n  * {\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif;\n    margin: 0;\n    padding: 0;\n    color: inherit;\n    font-size: inherit;\n    font-weight: 300;\n    line-height: 1.4;\n    word-break: break-word;\n  }\n  html {\n    font-size: 62.5%;\n  }\n  body {\n    margin: 0;\n    padding: 0;\n    min-height: 100vh;\n    font-size: 1.8rem;\n    background: #333;\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    color: #fff;\n  }\n`;\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fullscreen: false,\n      location:\n        storage && storage.getItem(\"epub-location\")\n          ? storage.getItem(\"epub-location\")\n          : 2,\n      localFile: null,\n      localName: null,\n      largeText: false\n    };\n    this.rendition = null;\n  }\n\n  toggleFullscreen = () => {\n    this.setState(\n      {\n        fullscreen: !this.state.fullscreen\n      },\n      () => {\n        setTimeout(() => {\n          const evt = document.createEvent(\"UIEvents\");\n          evt.initUIEvent(\"resize\", true, false, global, 0);\n        }, 1000);\n      }\n    );\n  };\n\n  onLocationChanged = location => {\n    this.setState(\n      {\n        location\n      },\n      () => {\n        storage && storage.setItem(\"epub-location\", location);\n      }\n    );\n  };\n\n  onToggleFontSize = () => {\n    const nextState = !this.state.largeText;\n    this.setState(\n      {\n        largeText: nextState\n      },\n      () => {\n        this.rendition.themes.fontSize(nextState ? \"140%\" : \"100%\");\n      }\n    );\n  };\n\n  getRendition = rendition => {\n    // Set inital font-size, and add a pointer to rendition for later updates\n    const { largeText } = this.state;\n    this.rendition = rendition;\n    rendition.themes.fontSize(largeText ? \"140%\" : \"100%\");\n  };\n  handleChangeFile = (event, results) => {\n    if (results.length > 0) {\n      const [e, file] = results[0];\n      if (file.type !== \"application/epub+zip\") {\n        return alert(\"Unsupported type\");\n      }\n      this.setState({\n        localFile: e.target.result,\n        localName: file.name,\n        location: null\n      });\n    }\n  };\n  render() {\n    const { fullscreen, location, localFile, localName } = this.state;\n    return (\n      <Container>\n        <GlobalStyle />\n        <Bar>\n          <LogoWrapper href=\"https://github.com/gerhardsletten/react-reader\">\n            <Logo\n              src=\"https://gerhardsletten.github.io/react-reader/files/react-reader.svg\"\n              alt=\"React-reader - powered by epubjs\"\n            />\n          </LogoWrapper>\n          <ButtonWrapper>\n            <FileReaderInput as=\"buffer\" onChange={this.handleChangeFile}>\n              <GenericButton>Upload local epub</GenericButton>\n            </FileReaderInput>\n            <GenericButton onClick={this.toggleFullscreen}>\n              Use full browser window\n              <CloseIcon />\n            </GenericButton>\n          </ButtonWrapper>\n        </Bar>\n        <ReaderContainer fullscreen={fullscreen}>\n          <ReactReader\n            url={localFile || DEMO_URL}\n            title={localName || DEMO_NAME}\n            location={location}\n            locationChanged={this.onLocationChanged}\n            getRendition={this.getRendition}\n          />\n          <FontSizeButton onClick={this.onToggleFontSize}>\n            Toggle font-size\n          </FontSizeButton>\n        </ReaderContainer>\n      </Container>\n    );\n  }\n}\n\nexport default App;\n","export default {\n  container: {\n    overflow: \"hidden\",\n    height: \"100%\"\n  },\n  readerArea: {\n    position: \"relative\",\n    zIndex: 1,\n    height: \"100%\",\n    width: \"100%\",\n    backgroundColor: \"#fff\",\n    transition: \"all .3s ease\"\n  },\n  containerExpaned: {\n    transform: \"translateX(256px)\"\n  },\n  titleArea: {\n    position: \"absolute\",\n    top: 20,\n    left: 50,\n    right: 50,\n    textAlign: \"center\",\n    color: \"#999\"\n  },\n  reader: {\n    position: \"absolute\",\n    top: 50,\n    left: 50,\n    bottom: 20,\n    right: 50\n  },\n  swipeWrapper: {\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 200\n  },\n  prev: {\n    left: 1\n  },\n  next: {\n    right: 1\n  },\n  arrow: {\n    outline: \"none\",\n    border: \"none\",\n    background: \"none\",\n    position: \"absolute\",\n    top: \"50%\",\n    marginTop: -32,\n    fontSize: 64,\n    padding: \"0 10px\",\n    color: \"#E2E2E2\",\n    fontFamily: \"arial, sans-serif\",\n    cursor: \"pointer\",\n    userSelect: \"none\",\n    appearance: \"none\",\n    fontWeight: \"normal\"\n  },\n  arrowHover: {\n    color: \"#777\"\n  },\n  tocBackground: {\n    position: \"absolute\",\n    left: 256,\n    top: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 1\n  },\n  tocArea: {\n    position: \"absolute\",\n    left: 0,\n    top: 0,\n    bottom: 0,\n    zIndex: 0,\n    width: 256,\n    overflowY: \"auto\",\n    WebkitOverflowScrolling: \"touch\",\n    background: \"#f2f2f2\",\n    padding: \"10px 0\"\n  },\n  tocAreaButton: {\n    userSelect: \"none\",\n    appearance: \"none\",\n    background: \"none\",\n    border: \"none\",\n    display: \"block\",\n    fontFamily: \"sans-serif\",\n    width: \"100%\",\n    fontSize: \".9em\",\n    textAlign: \"left\",\n    padding: \".9em 1em\",\n    borderBottom: \"1px solid #ddd\",\n    color: \"#aaa\",\n    boxSizing: \"border-box\",\n    outline: \"none\",\n    cursor: \"pointer\"\n  },\n  tocButton: {\n    background: \"none\",\n    border: \"none\",\n    width: 32,\n    height: 32,\n    position: \"absolute\",\n    top: 10,\n    left: 10,\n    borderRadius: 2,\n    outline: \"none\"\n  },\n  tocButtonExpaned: {\n    background: \"#f2f2f2\"\n  },\n  tocButtonBar: {\n    position: \"absolute\",\n    width: \"60%\",\n    background: \"#ccc\",\n    height: 2,\n    left: \"50%\",\n    margin: \"-1px -30%\",\n    top: \"50%\",\n    transition: \"all .5s ease\"\n  },\n  tocButtonBarTop: {\n    top: \"35%\"\n  },\n  tocButtonBottom: {\n    top: \"66%\"\n  },\n  loadingView: {\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"10%\",\n    right: \"10%\",\n    color: \"#ccc\",\n    textAlign: \"center\",\n    margintop: \"-.5em\"\n  }\n};\n","import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Swipeable } from \"react-swipeable\";\nimport { EpubView } from \"..\";\nimport defaultStyles from \"./style\";\n\nclass TocItem extends PureComponent {\n  setLocation = () => {\n    this.props.setLocation(this.props.href);\n  };\n  render() {\n    const { label, styles } = this.props;\n    return (\n      <button onClick={this.setLocation} style={styles}>\n        {label}\n      </button>\n    );\n  }\n}\n\nTocItem.propTypes = {\n  label: PropTypes.string,\n  href: PropTypes.string,\n  setLocation: PropTypes.func,\n  styles: PropTypes.object\n};\n\nclass ReactReader extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.readerRef = React.createRef();\n    this.state = {\n      expanedToc: false,\n      toc: false\n    };\n  }\n  toggleToc = () => {\n    this.setState({\n      expanedToc: !this.state.expanedToc\n    });\n  };\n\n  next = () => {\n    const node = this.readerRef.current;\n    node.nextPage();\n  };\n\n  prev = () => {\n    const node = this.readerRef.current;\n    node.prevPage();\n  };\n\n  onTocChange = toc => {\n    const { tocChanged } = this.props;\n    this.setState(\n      {\n        toc: toc\n      },\n      () => tocChanged && tocChanged(toc)\n    );\n  };\n\n  renderToc() {\n    const { toc, expanedToc } = this.state;\n    const { styles } = this.props;\n    return (\n      <div>\n        <div style={styles.tocArea}>\n          <div style={styles.toc}>\n            {toc.map((item, i) => (\n              <TocItem\n                {...item}\n                key={i}\n                setLocation={this.setLocation}\n                styles={styles.tocAreaButton}\n              />\n            ))}\n          </div>\n        </div>\n        {expanedToc && (\n          <div style={styles.tocBackground} onClick={this.toggleToc} />\n        )}\n      </div>\n    );\n  }\n\n  setLocation = loc => {\n    const { locationChanged } = this.props;\n    this.setState(\n      {\n        expanedToc: false\n      },\n      () => locationChanged && locationChanged(loc)\n    );\n  };\n\n  renderTocToggle() {\n    const { expanedToc } = this.state;\n    const { styles } = this.props;\n    return (\n      <button\n        style={Object.assign(\n          {},\n          styles.tocButton,\n          expanedToc ? styles.tocButtonExpaned : {}\n        )}\n        onClick={this.toggleToc}\n      >\n        <span\n          style={Object.assign({}, styles.tocButtonBar, styles.tocButtonBarTop)}\n        />\n        <span\n          style={Object.assign({}, styles.tocButtonBar, styles.tocButtonBottom)}\n        />\n      </button>\n    );\n  }\n\n  render() {\n    const {\n      title,\n      showToc,\n      loadingView,\n      styles,\n      locationChanged,\n      swipeable,\n      ...props\n    } = this.props;\n    const { toc, expanedToc } = this.state;\n    return (\n      <div style={styles.container}>\n        <div\n          style={Object.assign(\n            {},\n            styles.readerArea,\n            expanedToc ? styles.containerExpaned : {}\n          )}\n        >\n          {showToc && this.renderTocToggle()}\n          <div style={styles.titleArea}>{title}</div>\n          <Swipeable\n            onSwipedRight={this.prev}\n            onSwipedLeft={this.next}\n            trackMouse\n          >\n            <div style={styles.reader}>\n              <EpubView\n                ref={this.readerRef}\n                loadingView={loadingView}\n                {...props}\n                tocChanged={this.onTocChange}\n                locationChanged={locationChanged}\n              />\n              {swipeable && <div style={styles.swipeWrapper} />}\n            </div>\n          </Swipeable>\n          <button\n            style={Object.assign({}, styles.arrow, styles.prev)}\n            onClick={this.prev}\n          >\n            ‹\n          </button>\n          <button\n            style={Object.assign({}, styles.arrow, styles.next)}\n            onClick={this.next}\n          >\n            ›\n          </button>\n        </div>\n        {showToc && toc && this.renderToc()}\n      </div>\n    );\n  }\n}\n\nReactReader.defaultProps = {\n  loadingView: <div style={defaultStyles.loadingView}>Loading…</div>,\n  locationChanged: null,\n  tocChanged: null,\n  showToc: true,\n  styles: defaultStyles\n};\n\nReactReader.propTypes = {\n  title: PropTypes.string,\n  loadingView: PropTypes.element,\n  showToc: PropTypes.bool,\n  locationChanged: PropTypes.func,\n  tocChanged: PropTypes.func,\n  styles: PropTypes.object,\n  swipeable: PropTypes.bool\n};\n\nexport default ReactReader;\n","import EpubView from \"./EpubView/EpubView\";\nimport EpubViewStyle from \"./EpubView/style\";\nimport ReactReader from \"./ReactReader/ReactReader\";\nimport ReactReaderStyle from \"./ReactReader/style\";\n\nexport { EpubView, EpubViewStyle, ReactReader, ReactReaderStyle };\n"],"sourceRoot":""}